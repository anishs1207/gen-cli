# gn-cli

> A CLI tool that generates shell commands using Gemini AI, supporting Linux/macOS, WSL, and Git Bash on Windows.

---

## Features

- Generate shell commands from natural language prompts.
- Automatically cleans markdown/backticks from AI responses.
- Converts Linux commands to Windows equivalents when running on `cmd.exe`.
- Supports Git Bash and WSL without converting commands.
- Handles GEMINI API key management:
  - Prompts user if key is missing.
  - Allows changing the API key with `gn change-api`.

---

## Installation

Install globally via npm:

```bash
npm install -g gn-cli
```

Ensure you have Node.js >= 18 installed.

## Usage

### Run a command

```bash
gn list files in current directory
```

Output:

```console
$ ls -F
```

You will be prompted:

```text
Run this command? [y/N]:
```

Type `y` to execute the command directly in your shell.

### Change GEMINI API Key

```bash
gn change-api
```

This will prompt you for a new API key and save it:

- **Linux/macOS** → saved in `~/.bashrc` or `~/.zshrc`
- **Windows** → must set `GEMINI_API_KEY` environment variable manually

Example on Windows (PowerShell):

```powershell
setx GEMINI_API_KEY "your_api_key_here"
```

## Supported Shells

| OS | Shell | Notes |
|----|-------|-------|
| Linux/macOS | bash/zsh | Uses ls, cat, cp by default |
| Windows | cmd.exe | Converts Linux commands (ls → dir) |
| Windows | Git Bash | Keeps Linux commands (ls, cat) |
| Windows | WSL | Keeps Linux commands |

## CLI Arguments

- `<prompt>`: Your natural language description of a shell command.
- `change-api`: Prompt to update your GEMINI API key.

## Examples

```bash
# List all files in the current directory
gn list all files

# Remove a file
gn delete file myfile.txt

# Copy a file
gn copy file.txt to backup.txt

# Change API key
gn change-api
```

## Installation from source

Clone this repository:

```bash
git clone https://github.com/yourusername/gn-cli.git
cd gn-cli
npm install
npm link
```

This allows you to run `gn` globally while developing.

## Development

- Uses ES Modules (import/export syntax)
- Requires Node.js >= 18
- Uses `node-fetch` to call the Gemini API
- Prompts user for input using `readline`
- Executes shell commands with `child_process.execSync`

## Notes

- Make sure your GEMINI API key has access to Gemini 2.5 Flash model.
- For Windows users, set the `GEMINI_API_KEY` environment variable in PowerShell or system settings.
- Always test commands generated by the CLI before running in sensitive environments.

## License

MIT © Anish